# 테트로미노

import sys
read = sys.stdin.readline

n, m = map(int, read().split())
board = [list(map(int, read().split())) for _ in range(n)]

T = [
[(0,0), (0,1), (0,2), (0,3)], # a1
[(0,0), (1,0), (2,0), (3,0)], # a2
[(0,0), (0,1), (1,0), (1,1)], # b1
[(0,0), (1,0), (2,0), (2,1)], # c1
[(0,0), (1,0), (0,1), (0,2)], # c2
[(0,0), (1,0), (2,0), (2,-1)], # c3
[(0,0), (0,1), (0,2), (-1,2)], # c4
[(0,0), (1,0), (1,1), (1,2)], # c5
[(0,0), (0,1), (0,2), (1,2)], # c6
[(0,0), (1,0), (2,0), (0,1)], # c7
[(0,0), (0,1), (1,1), (2,1)], # c8
[(0,0), (1,0), (1,1), (2,1)] ,
[(0,0), (1,0), (1,-1), (2,-1)],
[(0,0), (0,1), (-1,1), (-1,2)],
[(0,0), (0,1), (1,1), (1,2)],
[(0,0), (0,1), (0,2), (1,1)], 
[(0,0), (1,0), (1,-1), (1,1)],
[(0,0), (0,1), (-1,1), (1,1)],
[(0,0), (-1,0), (1,0), (0,1)]
]

maxx = -1

for x in range(n):
    for y in range(m):
        for t in T: 
            res = 0
            cnt = 0
            for dx, dy in t:
                # print(dx,dy)
                nx = x + dx
                ny = y + dy
                if 0 <= nx < n and 0 <= ny < m:
                    res += board[nx][ny]
                    cnt += 1
                else:
                    break
                if cnt == 4:
                    maxx = max(maxx, res)
                
print(maxx)